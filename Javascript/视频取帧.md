## 视频取帧

给定一个视频，获取当前视频的某一帧生成图片展示，提供一下两种方式。

### 方式一: 通过 canvas 转换成 base64 图片

```js
// 视频转 base64
getVideoBase64(url) {
    return new Promise(function (resolve, reject) {
        let dataURL = '';
        let video = document.createElement("video");
        video.setAttribute('crossOrigin', 'Anonymous');//处理跨域
        video.setAttribute('src', url);
        video.setAttribute('width', 400);
        video.setAttribute('height', 240);
        video.addEventListener('loadeddata', function () {
            let canvas = document.createElement("canvas"),
                width = video.width, //canvas的尺寸和图片一样
                height = video.height;
            canvas.width = width;
            canvas.height = height;
            canvas.getContext("2d").drawImage(video, 0, 0, width, height); //绘制canvas
            dataURL = canvas.toDataURL('image/jpeg'); //转换为base64
            resolve(dataURL);
        });
    });
}
```

### 方式二：使用视频帧缩略图接口

视频帧缩略图接口 [vframe](https://developer.qiniu.com/dora/api/1313/video-frame-thumbnails-vframe) 用于从视频流中截取指定时刻的单帧画面并按指定大小缩放成图片

* 接口规格
```
vframe
    /<Format>
    /offset/<Second>
    /w/<Width>
    /h/<Height>
    /rotate/<Degree>
```

| -- 参数名称 -- | -- 必填 -- | -- 说明 -- |
| <Format>         | 是 | 输出的目标截图格式，支持jpg、png等。 |
| /offset/<Second> | 是 | 指定截取视频的时刻，单位：秒，精确到毫秒。 | 
| /w/<Width>       |    | 缩略图宽度，单位：像素（px），取值范围为1-3840。只指定w时，h按比例缩放。同时指定时，按照指定w、h缩放。 | 
| /h/<Height>      |    | 缩略图高度，单位：像素（px），取值范围为1-2160。只指定h时，w按比例缩放。同时指定时，按照指定w、h缩放。 | 
| /rotate/<Degree> |    | 指定顺时针旋转的度数，可取值为90、180、270、auto，默认为不旋转。 | 


实现截取视频的某一帧其实很方便，只需在视频的 `url` 后面这样拼接即可： `http://xxx.clouddn.com/test.mp4?vframe/jpg/offset/8/w/300/h/200`

```js
<video style={{width: '40%', height: 'auto'}} src="http://42.81.160.213:808//images/Borrower/68c591052aca48eea0f9907301cfa6e4/ba2b82afb5b44197b97b84fbe425a102/ba2b82afb5b44197b97b84fbe425a102.mp4?vframe/jpg/offset/8/w/300/h/200"></video>
```

其中 `jpg` 为生成图片的格式，`8` 为截取视频第8秒的截图，`w` 为宽度300px，`h` 为高度 200px。
由于第三方平台对url参数做了处理，这种方式方便快捷好用。
